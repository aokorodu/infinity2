////  heroList////  Created by Matthew on 2012-10-19.//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.////package com.mhl.views{	import com.mhl.utils.*;	import flash.display.MovieClip;		import flash.display.Sprite;	import flash.text.TextField;    import flash.text.TextFieldAutoSize;    import flash.text.TextFormat;		import flash.events.GestureEvent;	import flash.events.PressAndTapGestureEvent;	import flash.events.TouchEvent;	import flash.ui.Multitouch;	import flash.ui.MultitouchInputMode;	import flash.geom.*;	import com.greensock.*;	import com.greensock.easing.*;	import com.greensock.plugins.*;	import com.greensock.loading.*;	import com.greensock.events.LoaderEvent;	import com.greensock.loading.display.*;			 public class heroList extends MovieClip{			private var _factory:appFactory;		private var _queue:LoaderMax;		private var recArray:Array;		private var MoviesArray;		public function heroList(holder:MovieClip) {			// Empty constructor			_factory = new appFactory();			_queue = new LoaderMax({name:"mainQueue", auditSize:false, maxConnections:7});													}		function create(type:String,arr:Array, cols:Number=4,  cats:Array=null, sub:Array=null) :MovieClip {			var mc:MovieClip = new MovieClip();			addChild(mc);			trace("___________________when does this happen");			mc.x = mc.sx = 16;			mc.y = mc.sy = 82; 	//121			mc.dim = false;			mc.tmpscr = "";		/*	_factory.Hide(mc);*/			//Tint(mc,0x000000);/*			mc.psel = Favorites.sel;*/			mc.arr = arr.concat();			mc.sel = -1;			mc.tmpscr = "";			mc.myType= type;			var cont = _factory.Mov(mc, "cont", [0,135]);			cont.dy = cont.sy;			cont.scrollcap = 250;			var items = _factory.Mov(cont, "items", [6,7]);		/*	mc.scrollRect = new Rectangle(0,0,1024,768);*//*			stage.addEventListener(MouseEvent.MOUSE_DOWN, StartDrag);			stage.addEventListener(Event.ENTER_FRAME, MoveDrag);			stage.addEventListener(MouseEvent.MOUSE_UP, StopDrag);*/			mc.cats = cats;			mc.cols = cols;			mc.h = 393;			var w = 0;			var ro;/*			if (Favorites.sel==0){				mc.cols = 3;			}*/			for (var i=0; i<mc.cols*mc.cats.length; i++){				var r = Math.floor(i/cols);				if (i-(r*cols)==0){ w= 0; }				var h = mc.h*r;				/* static content */				var titleArray:Array, titleFinal:Array;				var tn:Number = i - (r*mc.cols);				titleFinal = [					{t:mc.arr[i].title, 	d:"", 	v:"", 	p:mc.arr[i].p,	a:"Added to Saved"}				];/*				if (Favorites.sel==0){					titleArray = [						{t:"To Resume", 	d:"", 	v:"", 	p:"",	a:""},						{t:"Just Added", 	d:"", 	v:"", 	p:"",	a:""},						{t:"Ending this Week", 	d:"", 	v:"", 	p:"",	a:""},					];					titleFinal.pop();					titleFinal.push(titleArray[tn]);				}*/				if (mc.arr[i].entityType!="Movie"){ 					var ep = mc.arr[i].episodes.item[0].title;					ep = ep.split(mc.arr[i].episodes.item[0].parentTitle + ": ");					if (ep.length<2){ ep = ep[0]; } else { ep = ep[1]; }					titleFinal[0].d = "\"" + ep + "\""; 				}				h = i - (r*mc.cols);				h *= 128;				h += mc.h*r;				h -= 70;				w = 0;				if (w==0){					var cat = _factory.Mov(items, "cat"+r, [-4,h-51], [1,1]);					var cat_txt = _factory.Spr(cat, "txt", [0,0], [1,1],						cats[r], "big", 3, "dark");					ro = _factory.Mov(items, "ro"+r, [0,0]);					ro.dx = 0;					ro.video = 0;					ro.i = i;					ro.n = r;					var logo;					// all video row spacing					if (r>0){						var tmpro:MovieClip = mc.cont.items["ro"+Number(r-1)];						if (tmpro.video==2 && r==1){							ro.y -= 64;							cat.y -= 64;							}					}				}				// TITLE / ROTTEN TOM / PRICE				var ti = _factory.Mov(ro, "ti"+i, [w-22,h+304], [1,1]);				if (w<50){ ti.x = ti.sx = w-4; }				var x = 0;				var y = 58;				var titl = _factory.Spr(ti, "titl", [0,22], [1,1], titleFinal[0].t, "big", 0, "fff", false, 670, 130);				items["ti"+i] = ti;				ti.i = i;			/*	ti.whatthefuck =  titleFinal[0].t;*/				ti.mouseChildren = false;/*				ti.addEventListener(MouseEvent.CLICK, FavoritesBrowseSelect);*/				var item = _factory.Mov(ro, "item"+i, [w,h]);				items["item"+i] = item;				item.c = 0.2;				item.vid = 0;				item.pressed = false;				var network = new MovieClip();				if (ro.video<1){					ti.y = ti.sy -= 22;				}				item.ratio = 0;				item.fake = false;				item.li = true;				item.scaleX = item.scaleY = 1;				ti.y = ti.sy = h - 28;				var item_hr = _factory.Mov(ti, "hr", [0,117], [1,1]);				item_hr.alpha = 0.33;				_queue.append( new ImageLoader("images/hr.png", {container:item_hr, width:989, height:1, scaleMode:"proportionalInside" }) );					if (i==0){					items.y = items.sy = 47;				}			mc.whollyShit = titleFinal[0].t;				var airing;				airing = _factory.Mov(item, "airing", [0,33], [1,1]);				if(type=="download"){					if(titleFinal[0].t=="The Hangover Part II"){							var airspr = _factory.Spr(airing, "airspr", [0,0], [1,1],							"Downloaded 4 GB", "nano", 1, "ccc");					}						if(titleFinal[0].t=="Despicable Me"){								var airspr = _factory.Spr(airing, "airspr", [0,0], [1,1],								"Downloaded 3.3 GB", "nano", 1, "ccc");						}						if(titleFinal[0].t=="Toy Story 3"){								var airspr = _factory.Spr(airing, "airspr", [0,0], [1,1],								"Downloaded 3.2 GB", "nano", 1, "ccc");						}					trace(titleFinal[0].t);				}				if (item.long){ 					w+=490; 				} else if (item.ratio!=0) {					w+=330;				} else { 					w+=192; 				}			}/*			art.load();			queue.load();*/			_queue.load();				return mc;		}	}};